(this["webpackJsonpcontentful-1i"]=this["webpackJsonpcontentful-1i"]||[]).push([[0],{130:function(t,e,n){},414:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(12),o=n(17),s=(n(127),n(128),n(129),n(130),n(16)),i=n.n(s),u=n(26),l=n(112),j=n(113),p=n(120),d=n(119),f=n(8),O=n(118),b=n(7),h=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var r;return Object(l.a)(this,n),(r=e.call(this,t)).onConfigure=Object(u.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.props.sdk.app.getCurrentState();case 2:return e=t.sent,t.abrupt("return",{parameters:r.state.parameters,targetState:e});case 4:case"end":return t.stop()}}),t)}))),r.state={parameters:{}},t.sdk.app.onConfigure((function(){return r.onConfigure()})),r}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=Object(u.a)(i.a.mark((function t(){var e,n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.sdk.app.getParameters();case 2:e=t.sent,this.setState(e?{parameters:e}:this.state,(function(){n.props.sdk.app.setReady()}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(b.jsx)(f.Workbench,{className:Object(O.a)({margin:"80px"}),children:Object(b.jsxs)(f.Form,{children:[Object(b.jsx)(f.Heading,{children:"App Config"}),Object(b.jsx)(f.Paragraph,{children:"Welcome to your contentful app. This is your config page."})]})})}}]),n}(c.Component),g=function(t){return Object(b.jsx)(f.Paragraph,{children:"Hello Entry Editor Component"})},m=function(t){return Object(b.jsx)(f.Paragraph,{children:"Hello Page Component"})},x=n(15),v=n(116),k=n(117),y=n(13),C=Object(y.c)({name:"violations",initialState:[],reducers:{clearViolations:{reducer:function(){return[]}},addViolation:{reducer:function(t,e){var n=e.payload;t.push(Object(k.a)({id:Object(y.d)()},n))}}}}),E=C.actions,P=E.addViolation,T=E.clearViolations,w=C.reducer,A=function(t){return t.rules.rules},I=function(t){return t.rules.status},L=n(30),N=Object(L.a)([function(t){return t.violations}],(function(t){return t})),_=function(t){var e=t.violations;switch(t.status){case"Loading":return Object(b.jsx)(f.Paragraph,{children:"Fetching the style rules..."});case"Success":return e&&e.length>0?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f.Paragraph,{children:["There are ",Object(b.jsx)("b",{children:e.length})," issues in your content."]}),Object(b.jsx)(f.List,{style:{marginTop:"12px"},children:e.map((function(t){return Object(b.jsx)(f.ListItem,{children:Object(b.jsx)(f.Paragraph,{children:"".concat(t.name," - ").concat(t.fix)})},t.id)}))})]}):Object(b.jsx)(f.Paragraph,{children:"Your content looks great! \ud83c\udf89"});case"Failure":return Object(b.jsx)(f.Paragraph,{children:"Ooops"})}},R=Object(x.b)((function(t){return{violations:N(t),status:I(t)}}),null)(_),S=function(t){var e=t.sdk,n=Object(x.c)(),r=e.entry.fields.body,a=Object(x.d)(I),o=Object(x.d)(A),s=new Worker("rules-worker.js");return s.onmessage=function(t){n(T());var e=t.data.violations;null===e||void 0===e||e.forEach((function(t){n(P(t))}))},Object(c.useEffect)((function(){e.window.startAutoResizer()}),[]),Object(c.useEffect)((function(){var t=r.onValueChanged((function(t){"Success"===a&&s.postMessage({content:Object(v.documentToPlainTextString)(t),rules:o})}));return function(){return t()}}),[r,a]),Object(b.jsx)(R,{})},F=function(t){return Object(b.jsx)(f.Paragraph,{children:"Hello Entry Field Component"})},D=function(t){return Object(b.jsx)(f.Paragraph,{children:"Hello Dialog Component"})},H=n(11),V=n(23);function Y(t){var e=[];return t&&t.forEach((function(t){return e.push(t.fields)})),e}var G=Object(y.b)("rules/fetchRules",function(){var t=Object(u.a)(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.space.getEntries({content_type:"styleRule"}).then((function(t){return Y(t.items)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),W=Object(y.c)({name:"rules",initialState:{rules:[],status:"NotAsked"},reducers:{},extraReducers:(r={},Object(V.a)(r,G.pending,(function(t){t.status="Loading"})),Object(V.a)(r,G.fulfilled,(function(t,e){t.rules=e.payload,t.status="Success"})),Object(V.a)(r,G.rejected,(function(t){t.status="Failure"})),r)}).reducer,B=Object(H.c)({violations:w,rules:W});Object(o.init)((function(t){var e=document.getElementById("root"),n=Object(y.a)({reducer:B});n.dispatch(G(t)),[{location:o.locations.LOCATION_APP_CONFIG,component:Object(b.jsx)(h,{sdk:t})},{location:o.locations.LOCATION_ENTRY_FIELD,component:Object(b.jsx)(F,{sdk:t})},{location:o.locations.LOCATION_ENTRY_EDITOR,component:Object(b.jsx)(g,{sdk:t})},{location:o.locations.LOCATION_DIALOG,component:Object(b.jsx)(D,{sdk:t})},{location:o.locations.LOCATION_ENTRY_SIDEBAR,component:Object(b.jsx)(S,{sdk:t})},{location:o.locations.LOCATION_PAGE,component:Object(b.jsx)(m,{sdk:t})}].forEach((function(r){t.location.is(r.location)&&Object(a.render)(Object(b.jsx)(x.a,{store:n,children:r.component}),e)}))}))}},[[414,1,2]]]);
//# sourceMappingURL=main.69f85883.chunk.js.map